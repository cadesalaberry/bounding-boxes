{"version":3,"sources":["SmartCanvas.js","SelectionItem.js","fruits.jpg","App.js","reportWebVitals.js","index.js"],"names":["getRectanglesFromCanvas","canvas","width","height","getObjects","filter","obj","selectable","map","coordinates","Object","values","aCoords","previewWindow","ys","o","y","xs","x","left","Math","min","right","max","top","getPreviewWindowFromCoordinates","imageData","getContext","getImageData","dataUrl","document","createElement","ctx","putImageData","toDataURL","getDataUrlFromImageData","console","log","_original","useStyles","makeStyles","theme","root","marginTop","spacing","media","objectFit","display","textContent","paddingLeft","chipList","flexWrap","margin","SelectionItem","props","classes","useState","tags","setTags","currentTag","setCurrentTag","selectedItem","position","Card","className","CardContent","src","alt","Typography","variant","component","color","toFixed","value","i","Chip","size","label","onDelete","tag","prevTags","t","trim","toLowerCase","noValidate","onSubmit","event","preventDefault","concat","TextField","onChange","target","flexGrow","bottomAppBar","bottom","title","panelsContainer","overflow","panels","transition","gridTemplateColumns","padding","gridGap","imageWrapper","alignItems","justifyContent","image","maxWidth","maxHeight","opacity","canvasWrapper","App","setCanvas","selection","setSelection","activeStep","setActiveStep","imageHeight","setImageHeight","imageWidth","setImageWidth","createMuiTheme","palette","type","ThemeProvider","CssBaseline","AppBar","Toolbar","style","transform","Paper","elevation","id","logo","onLoad","getElementById","window","getComputedStyle","parsedWidth","replace","parsedHeight","_canvas","elementId","params","origX","origY","rectangle","isDown","fabric","Canvas","containerClass","on","pointer","getPointer","e","Rect","fill","stroke","strokeWidth","add","set","abs","renderAll","getSmartCanvas","theCanvas","theImage","fImage","Image","originX","originY","scaleToHeight","scaleToWidth","MobileStepper","steps","nextButton","Button","onClick","prevActiveStep","disabled","KeyboardArrowRight","backButton","KeyboardArrowLeft","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.7565e7c8.chunk.js","sourcesContent":["import { fabric } from \"fabric\";\n\n/**\n * Spawns a fabric canvas tha allows drawing rectangular selections.\n *\n * @param {string} elementId\n * @param {*} params\n * @returns\n */\nexport const getSmartCanvas = (elementId, params) => {\n\n  let isDown = false, origX, origY, rectangle;\n\n  const canvas = new fabric.Canvas(elementId, {\n    height: params.height,\n    width: params.width,\n    containerClass: 'canvas',\n  })\n\n  canvas.on('mouse:down', function(o){\n    var pointer = canvas.getPointer(o.e);\n\n    if (o.target && o.target.selectable) return;\n\n    isDown = true;\n    origX = pointer.x;\n    origY = pointer.y;\n    \n    rectangle = new fabric.Rect({\n      left: origX,\n      top: origY,\n      fill: 'transparent',\n      stroke: 'red',\n      strokeWidth: 3,\n  })\n    \n    canvas.add(rectangle);\n  });\n\n  canvas.on('mouse:move', function(o){\n    if (!isDown) return;\n\n    var pointer = canvas.getPointer(o.e);\n    if(origX>pointer.x){\n        rectangle.set({ left: Math.abs(pointer.x) });\n    }\n    if(origY>pointer.y){\n        rectangle.set({ top: Math.abs(pointer.y) });\n    }\n    \n    rectangle.set({ width: Math.abs(origX - pointer.x) });\n    rectangle.set({ height: Math.abs(origY - pointer.y) });\n    canvas.renderAll();\n  });\n\n  canvas.on('mouse:up', function(o){\n    isDown = false;\n  });\n\n  return canvas;\n}\n\n\nexport const getNormalizedCoordinates = (item) => {\n\n}\n\n/**\n * Computes the biggest rectangle for the selection to fit in.\n *\n * @param {fabric.Point[]} coordinates\n * @returns\n */\nexport const getPreviewWindowFromCoordinates = (coordinates) => {\n  const ys = coordinates.map(o => o.y)\n  const xs = coordinates.map(o => o.x)\n  const left = Math.min(...xs)\n  const right = Math.max(...xs)\n  const top = Math.min(...ys)\n  const bottom = Math.max(...ys)\n  \n  return {\n    left,\n    top,\n    width: right - left,\n    height: bottom - top,\n  }\n}\n\n/**\n * Converts an image to a displayable format.\n * \n * @param {fabric.imageData} imageData\n * @returns\n */\nexport const getDataUrlFromImageData = (imageData) => {\n  const canvas = document.createElement('canvas');\n  const ctx = canvas.getContext('2d');\n  canvas.width = imageData.width;\n  canvas.height = imageData.height;\n  ctx.putImageData(imageData, 0, 0);\n\n  return canvas.toDataURL();\n}\n\n/**\n * Extract images from rectangle selection.\n * \n * @param {fabric.Canvas} canvas\n * @param {*} canvasSize\n * @returns\n */\nexport const getRectanglesFromCanvas = (canvas, { width, height }) => {\n  const objects = canvas.getObjects();\n\n  return objects\n    .filter(obj => obj.selectable) // Only get user made rectangles\n    .map((obj)=> {\n    const coordinates = Object.values(obj.aCoords);\n    const previewWindow = getPreviewWindowFromCoordinates(coordinates);\n    const { left, top, height, width } = previewWindow;\n    const imageData = canvas.getContext('2d').getImageData(left, top, width, height);\n    const dataUrl = getDataUrlFromImageData(imageData);\n    \n    // TODO: Adjust the preview window, they do not display the original selection\n    console.log(coordinates, previewWindow)\n    \n    return {\n      previewWindow,\n      imageData,\n      dataUrl,\n      _original: obj,\n    }\n  })\n}\n","import React, { useState } from 'react';\nimport {\n  Typography,\n  makeStyles,\n  Card,\n  Chip,\n  CardContent,\n  TextField,\n} from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    marginTop: theme.spacing(1),\n  },\n  media: {\n    height: 140,\n    width: '30%',\n    objectFit: 'contain',\n    display: 'inline-block',\n  },\n  textContent: {\n    width: '70%',\n    paddingLeft: theme.spacing(1),\n    display: 'inline-block',\n  },\n  chipList: {\n    display: 'flex',\n    // justifyContent: 'center',\n    flexWrap: 'wrap',\n    '& > *': {\n      margin: theme.spacing(0.5),\n    },\n  }\n}));\n\nconst SelectionItem = (props) => {\n  const classes = useStyles();\n  const [tags, setTags] = useState([]);\n  const [currentTag, setCurrentTag] = useState('');\n\n  const addTag = (event) => {\n    event.preventDefault();\n\n    // Handle duplicates later\n    setTags((prevTags) => prevTags.concat(currentTag.trim()));\n    setCurrentTag('');\n  };\n\n  const textFieldOnChange = (event) => {\n    setCurrentTag(event.target.value);\n  }\n\n  const removeTag = (tag) => () => {\n    setTags((prevTags) => prevTags.filter(t => t.trim().toLowerCase() !== tag.trim().toLowerCase()));\n  };\n\n  const { selectedItem, position } = props;\n  const { left, top, height, width } = selectedItem.previewWindow;\n\n  return (\n    <Card className={classes.root}>\n      <CardContent>\n        <img src={selectedItem.dataUrl} className={classes.media} alt=\"preview\"></img>\n        <div className={classes.textContent}>\n          <Typography variant=\"h5\" component=\"h2\">\n            Item {position + 1 }\n          </Typography>\n          <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n            left: {left.toFixed(2)} top: {top.toFixed(2)}<br/>\n            width: {width.toFixed(2)} height: {height.toFixed(2)}<br/><br/>\n          </Typography>\n          <div className={classes.chipList}>\n            {tags.map((value, i) => {\n              return (\n                <Chip variant=\"outlined\" size=\"small\"\n                  key={`${i}-${value}`}\n                  label={value}\n                  onDelete={removeTag(value)}/>\n                )\n            })}\n          </div>\n          <form className={classes.root} noValidate onSubmit={addTag}>\n            <TextField label=\"New Tag\" value={currentTag} onChange={textFieldOnChange}></TextField>\n          </form>\n        </div>\n      </CardContent>\n    </Card>\n  )\n}\n\n\nexport default SelectionItem;\n","export default __webpack_public_path__ + \"static/media/fruits.f39ea5b0.jpg\";","\nimport { fabric } from \"fabric\";\nimport React, { useState } from 'react';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { createMuiTheme, makeStyles, ThemeProvider } from '@material-ui/core/styles';\nimport {\n  Button,\n  MobileStepper,\n  Typography,\n  Paper,\n  AppBar,\n  Toolbar,\n} from '@material-ui/core';\nimport {\n  KeyboardArrowLeft,\n  KeyboardArrowRight,\n} from '@material-ui/icons';\n\nimport { getSmartCanvas, getRectanglesFromCanvas } from './SmartCanvas';\nimport SelectionItem from './SelectionItem';\n\nimport logo from './fruits.jpg';\nimport './App.css';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  bottomAppBar: {\n    top: 'auto',\n    bottom: 0,\n  },\n  title: {\n    flexGrow: 1,\n  },\n  panelsContainer: {\n    width: '100vw',\n    overflow: 'hidden',\n  },\n  panels: {\n    transition: 'transform .3s',\n    width: '200vw',\n    display: 'grid',\n    gridTemplateColumns: '1fr 1fr',\n    padding: '2.5vw',\n    gridGap: '5vw',\n    '& > *': {\n      height: '80vh',\n      overflow: 'scroll',\n    },\n  },\n  imageWrapper: {\n    position: 'relative',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: '100%',\n  },\n  image: {\n    maxWidth: '100%',\n    maxHeight: '75vh',\n    objectFit: 'contain',\n    opacity: 0,\n  },\n  canvasWrapper: {\n    position: 'absolute',\n    top: 0,\n  },\n}));\n\nfunction App() {\n  const classes = useStyles();\n\n  const [canvas, setCanvas] = useState(null);\n  const [selection, setSelection] = useState([]);\n  const [activeStep, setActiveStep] = useState(0);\n  const [imageHeight, setImageHeight] = useState(0);\n  const [imageWidth, setImageWidth] = useState(0);\n\n  const setupCanvas = () => {\n    const image = document.getElementById('image');\n    const { height, width } = window.getComputedStyle(image)\n\n    const parsedWidth = width.replace('px', '');\n    const parsedHeight = height.replace('px', '');\n\n    const _canvas = getSmartCanvas('canvas', {\n      height: parsedHeight,\n      width: parsedWidth,\n    });\n\n    \n    setImageHeight(parsedHeight);\n    setImageWidth(parsedWidth);\n    setCanvas(_canvas);\n    \n    window.theCanvas = _canvas\n    window.theImage = image\n\n    console.log('Drawing image onto canvas', parsedWidth, parsedHeight)\n\n    const fImage = new fabric.Image(image, {\n      originX: 'left',\n      originY: 'top',\n      top: 0,\n      left: 0,\n      selectable: false,\n    })\n\n    fImage.scaleToHeight(parsedHeight);\n    fImage.scaleToWidth(parsedWidth);\n\n    _canvas.add(fImage)\n  }\n\n  const getRectangles = () => {\n    return getRectanglesFromCanvas(canvas, {\n      height: imageHeight,\n      width: imageWidth,\n    });\n  }\n\n  const handleNext = () => {\n    const selection = getRectangles();\n\n    setSelection(selection)\n\n    setActiveStep((prevActiveStep) => prevActiveStep + 1);\n  };\n\n  const handleBack = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\n  };\n\n  const theme = createMuiTheme({\n    palette: {\n      type: 'dark',\n    },\n  });\n\n\n  return (\n    <ThemeProvider className=\"App\" theme={theme}>\n      <CssBaseline />\n      <AppBar position=\"static\">\n        <Toolbar>\n          <Typography variant=\"h6\" className={classes.title}>\n            {activeStep ? 'Categorize your selection' : 'Isolate objects'}\n          </Typography>\n        </Toolbar>\n      </AppBar>\n\n      <div className={classes.panelsContainer}>\n        <div className={classes.panels} style={{\n          transform: `translateX(-${100 * activeStep}vw)`\n        }}>\n          <Paper elevation={3}>\n            <div className={classes.imageWrapper}>\n              <img id=\"image\" src={logo} className={classes.image}\n                  alt=\"logo\"\n                  onLoad={setupCanvas} />\n              <div className={classes.canvasWrapper}>\n                <canvas className={classes.canvas} id=\"canvas\" />\n              </div>\n            </div>\n          </Paper>\n\n          <div>\n            {selection.map((selectedItem, i) => {\n              return (<SelectionItem selectedItem={selectedItem} key={i} position={i}></SelectionItem>)\n            })}\n          </div>\n        </div>\n      </div>\n\n      <AppBar position=\"fixed\" color=\"primary\" className={classes.bottomAppBar}>\n        <Toolbar>\n          <MobileStepper\n            steps={2}\n            variant=\"text\"\n            color=\"primary\"\n            activeStep={activeStep}\n            nextButton={\n              <Button size=\"small\" variant=\"contained\" color=\"primary\" onClick={handleNext} disabled={1 <= activeStep}>\n                Next\n                {<KeyboardArrowRight />}\n              </Button>\n            }\n            backButton={\n              <Button size=\"small\" variant=\"contained\" color=\"primary\" onClick={handleBack} disabled={activeStep <= 0}>\n                {<KeyboardArrowLeft />}\n                Back\n              </Button>\n            }\n          />\n        </Toolbar>\n      </AppBar>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}